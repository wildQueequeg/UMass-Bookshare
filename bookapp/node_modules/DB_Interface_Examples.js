var DB_Interface = require("DB_Interface");
var exports = module.exports = {};
var search = require("search");

/**
* If you have a username and you want to get their user information and somehow manipulate it (eg. generate a unique webpage or check they are a UMass student)
* A similar design is used for the other tables. All communication is done through DB_Interface.js, you'll need to require it like above.
*/

var username = "pcalderw1"; //supply your own known values

//The function that will handle the data once it is collected.
//This will check that the given user is an adult
//It should do null checks in case the user doens't exist
function isAdult(record)
{
	console.log(record.age >= 18); //We can extend this later
}

//This function will ask the DB for the userdata.
//It needs to provide the username (primary key) and a function (to pass values to)
function requestUserData(username_)
{
	DB_Interface.getUser(username_, isAdult);
}

//Now we use the requesting function.
// requestUserData(username); //This should output true or false


function log_ (out)
 {
 	console.log(out);
 }

//Test data you can add to the DB:
// DB_Interface.addUser("TestFirst", "TestLast", 21, "Test", "StillTest","m","abc@online.net", "555555555", "UMass", log_);
// DB_Interface.addBook("Brave New World", "Aldous Huxley", "0060850523", "9780060850524", "01-Jan-1932", 1, null, log_);
// DB_Interface.addBook("Bible", "God", "5555555555", "9785555555555", "01-Jan-0001", 1, null, log_);

// DB_Interface.searchBook("g", log_);

// DB_Interface.makeListing("pcalderw1", "9785555555555", true, true, true, 500, log_);
// DB_Interface.makenotAvailable("7eb4d26f-6f62-a7ae-e9fc-bb3cd6f9", log_);
DB_Interface.findBookListing("9785555555555", log_);
// DB_Interface.searchBook("co", log_);